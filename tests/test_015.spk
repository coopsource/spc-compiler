define function output taking arguments tape and length as
    print "Tape contents"
    new line
    set I to 1
    while I < length+1 do
        set X to element I of tape + 0
		print X
        set I to I + 1
    end while
    new line
end function

define function main taking no arguments as
	read N
	read M
	set I to 0
	set done to 0
	set S to N * N 
	set S to S + M
	set element S of update to 0
	set element S of move to 0
	set element S of next to 0
	while done = 0 do
	    read state
	    read symbol
	    if state = 0 then
	        if symbol = 0 then
	            set done to 1
	        else
	            nothing
	        end if
	    else
			nothing
		end if
		if done = 0 then
		    set row to state - 1
			set index to row * N + symbol
		    read element index of update
		    read element index of move
		    read element index of next
			set I to I + 1
		else
			nothing
		end if
	end while

	set element 1 of tape to 1
	set I to 1
	set done to 0
	while done = 0 do
		read T
		if T = 0 then
		    set done to 1
		else
			set element I of tape to T
			set I to I + 1
		end if
	end while
		
	set max to I - 1
	set pointer to 1
	set state to 1
	set done to 0
	set step to 1
	while done = 0 do
	    if pointer > max then
	    	set element pointer of tape to 1
			set max to pointer
		else
			nothing
		end if
		set row to state - 1
		set col to element pointer of tape
		set index to row * N + col
		print "State "
		print state
		new line
		print "Tape pointer "
		print pointer
		new line
		call output with tape and max
		set element pointer of tape to element index of update
		set pointer to pointer + element index of move
		set state to element index of next
		if state = 0 then
			set done to 1
		else
			nothing
		end if
		set step to step + 1
	    if step > 10 then
	        set done to 1
	    else
			nothing
		end if
	end while
	
	print "Program completed"
	new line
	call output with tape and max
end function